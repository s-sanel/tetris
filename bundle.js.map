{"version":3,"sources":["webpack:///webpack/bootstrap 50be6f8f56a6682e233a","webpack:///./lib/game.js","webpack:///./lib/board.js","webpack:///./lib/game_view.js","webpack:///./lib/pieces.js","webpack:///./lib/tetris.js"],"names":["Game","ctxMain","ctxNext","board","spawnPiece","insert","over","canHold","drop","clearFullRows","collision","currentTetromino","onTop","clearRect","WIDTH","HEIGHT","draw","nextTetromino","previewTetromino","holdTetromino","previewHoldTetromino","ctx","drawEnd","resetScore","temp","remove","coords","defaultCoords","center","defaultCenter","console","log","randomPiece","update","gameOver","movementAllowed","moveLeft","moveRight","rotationAllowed","rotate","Board","level","clearedRows","grid","createMatrix","width","height","matrix","push","Array","fill","padding","row","col","x","y","fillStyle","color","fillRect","lineWidth","strokeStyle","strokeRect","addAll","setTimeout","clearAll","i","addRowsInterval","setInterval","clearInterval","drawRow","j","clearRowsInterval","clearRow","piece","forEach","fullRows","fullRow","length","removeRows","updateStats","rowNumbers","removeRow","rowNumber","splice","unshift","updateScore","updateLevel","scoreElement","document","getElementById","score","scoreText","createTextNode","innerText","appendChild","levelElement","Math","floor","levelText","coord","coordsIncluded","filled","pos","potentialCoords","nextRotationCoords","inBoundaries","occupied","xMove","yMove","pieceX","pieceY","GameView","game","body","onkeydown","e","bindKeyHandlers","onkeyup","bindKeyHandlersUp","idInterval","initialSpeed","speed","gameStarted","preventDefault","key","style","move","slam","pause","handleHold","alert","startSpeed","start","requestAnimationFrame","animate","bind","drawEndOfGame","disabled","audio","Audio","play","oPiece","type","sPiece","zPiece","tPiece","iPiece","lPiece","jPiece","Piece","options","getRotationData","rotationState","canvas","ctxHold","getContext","map","nextCoords","rotateCoord","centerX","centerY","posFromCenter","oldx","oldy","TogglePiece","RotatePiece","StaticPiece","PIECES","random","addEventListener","context","canvasNext","contextNext","paused"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;AChEA;;;;AACA;;;;;;;;IAEMA,I;AACJ,gBAAYC,OAAZ,EAAqBC,OAArB,EAA8B;AAAA;;AAC5B,SAAKC,KAAL,GAAa,oBAAUF,OAAV,CAAb;AACA,SAAKA,OAAL,GAAeA,OAAf;AACA,SAAKC,OAAL,GAAeA,OAAf;AACA,SAAKE,UAAL;AACA,SAAKC,MAAL;AACA,SAAKC,IAAL,GAAY,KAAZ;AACA,SAAKC,OAAL,GAAe,IAAf;AACD;;;;2BAEK;AACJ,WAAKC,IAAL;AACA,WAAKH,MAAL;AACD;;;oCAEe;AACd,WAAKF,KAAL,CAAWM,aAAX;AACD;;;+BAES;AACR,aAAQ,KAAKC,SAAL,CAAe,KAAKC,gBAApB,KAAyC,KAAKR,KAAL,CAAWS,KAAX,CAAiB,KAAKD,gBAAtB,CAAjD;AACD;;;2BAEK;AACF,WAAKV,OAAL,CAAaY,SAAb,CAAuB,CAAvB,EAA0B,CAA1B,EAA6Bb,KAAKc,KAAlC,EAAyCd,KAAKe,MAA9C;AACA,WAAKZ,KAAL,CAAWa,IAAX,CAAgB,KAAKf,OAArB;AACA,WAAKgB,aAAL,CAAmBC,gBAAnB,CAAoC,KAAKhB,OAAzC;AACA,UAAG,KAAKiB,aAAR,EAAsB;AACpB,aAAKA,aAAL,CAAmBC,oBAAnB;AACD;AACJ;;;kCAEaC,G,EAAK;AACjB,WAAKlB,KAAL,CAAWmB,OAAX,CAAmBD,GAAnB;AACA,WAAKlB,KAAL,CAAWoB,UAAX;AACD;;;iCAEY;AACX,UAAI,KAAKhB,OAAT,EAAkB;AAChB,YAAG,KAAKY,aAAR,EAAuB;AACrB,cAAIK,OAAO,KAAKb,gBAAhB;AACA,eAAKR,KAAL,CAAWsB,MAAX,CAAkB,KAAKd,gBAAvB;;AAEA,eAAKA,gBAAL,GAAwB,KAAKQ,aAA7B;AACA,eAAKA,aAAL,GAAqBK,IAArB;;AAEA,eAAKb,gBAAL,CAAsBe,MAAtB,GAA+B,KAAKf,gBAAL,CAAsBgB,aAArD;AACA,eAAKhB,gBAAL,CAAsBiB,MAAtB,GAA+B,KAAKjB,gBAAL,CAAsBkB,aAArD;AACA,eAAKtB,OAAL,GAAe,KAAf;AACD,SAVD,MAUM;AACJ,cAAG,KAAKI,gBAAR,EAAyB;AACvB,iBAAKQ,aAAL,GAAqB,KAAKR,gBAA1B;AACA,iBAAKR,KAAL,CAAWsB,MAAX,CAAkB,KAAKd,gBAAvB;AACA,iBAAKP,UAAL;AACD;AACF;AACD,aAAKC,MAAL;AACD,OAnBD,MAmBO;AACLyB,gBAAQC,GAAR,CAAY,6BAAZ;AACD;AAEF;;;iCAEW;AACV,UAAI,CAAC,KAAKd,aAAV,EAAyB;AACvB,aAAKN,gBAAL,GAAwB,iBAAMqB,WAAN,EAAxB;AACD,OAFD,MAEO;AACL,aAAKrB,gBAAL,GAAwB,KAAKM,aAA7B;AACD;AACD,WAAKA,aAAL,GAAqB,iBAAMe,WAAN,EAArB;AACA,WAAKzB,OAAL,GAAe,IAAf;AACD;;;6BAEQ;AACP,WAAKJ,KAAL,CAAW8B,MAAX,CAAkB,KAAKtB,gBAAvB;AACD;;;2BAEK;AACJ,UAAG,KAAKuB,QAAL,EAAH,EAAmB;AACjB,aAAK5B,IAAL,GAAY,IAAZ;AACD,OAFD,MAGK,IAAI,KAAKI,SAAL,EAAJ,EAAsB;AACzB,aAAKD,aAAL;AACA,aAAKL,UAAL;AACD,OAHI,MAIA;AACH,aAAKD,KAAL,CAAWsB,MAAX,CAAkB,KAAKd,gBAAvB;AACA,aAAKA,gBAAL,CAAsBH,IAAtB;AACD;AACF;;;gCAEW;AACV,aAAO,KAAKL,KAAL,CAAWO,SAAX,CAAqB,KAAKC,gBAA1B,CAAP;AACD;;;+BAES;AACR,UAAG,KAAKR,KAAL,CAAWgC,eAAX,CAA2B,KAAKxB,gBAAhC,EAAkD,CAAlD,EAAqD,CAAC,CAAtD,CAAH,EAA4D;AAC1D,aAAKR,KAAL,CAAWsB,MAAX,CAAkB,KAAKd,gBAAvB;AACA,aAAKA,gBAAL,CAAsByB,QAAtB;AACA,aAAK/B,MAAL;AACD;AACF;;;gCAEU;AACT,UAAG,KAAKF,KAAL,CAAWgC,eAAX,CAA2B,KAAKxB,gBAAhC,EAAkD,CAAlD,EAAqD,CAArD,CAAH,EAA2D;AACzD,aAAKR,KAAL,CAAWsB,MAAX,CAAkB,KAAKd,gBAAvB;AACA,aAAKA,gBAAL,CAAsB0B,SAAtB;AACA,aAAKhC,MAAL;AACD;AACF;;;2BAEK;AACJ,aAAM,KAAKF,KAAL,CAAWgC,eAAX,CAA2B,KAAKxB,gBAAhC,EAAkD,CAAlD,EAAqD,CAArD,CAAN,EAA8D;AAC5D,aAAKH,IAAL;AACD;AACD,WAAKL,KAAL,CAAWsB,MAAX,CAAkB,KAAKd,gBAAvB;AACA,WAAKN,MAAL;AACD;;;6BAEQ;AACP,UAAI,KAAKF,KAAL,CAAWmC,eAAX,CAA2B,KAAK3B,gBAAhC,CAAJ,EAAsD;AACpD,aAAKR,KAAL,CAAWsB,MAAX,CAAkB,KAAKd,gBAAvB;AACA,aAAKA,gBAAL,CAAsB4B,MAAtB,CAA6B,KAAK5B,gBAAlC;AACA,aAAKN,MAAL;AACD,OAJD,MAIO,CAAG;AACX;;;;;;AAIHL,KAAKc,KAAL,GAAa,GAAb;AACAd,KAAKe,MAAL,GAAc,GAAd;;kBAEef,I;;;;;;;;;;;;;;;;;;;ICxITwC,K;AACJ,iBAAYnB,GAAZ,EAAiB;AAAA;;AACf,SAAKoB,KAAL,GAAa,CAAb;AACA,SAAKC,WAAL,GAAmB,CAAnB;AACA,SAAKC,IAAL,GAAY,KAAKC,YAAL,CAAkB,EAAlB,EAAsB,EAAtB,CAAZ;AACA,SAAKvB,GAAL,GAAWA,GAAX;AACD;;;;iCAEYwB,K,EAAOC,M,EAAQ;AAC1B,UAAMC,SAAS,EAAf;AACA,aAAOD,QAAP,EAAiB;AACfC,eAAOC,IAAP,CAAY,IAAIC,KAAJ,CAAUJ,KAAV,EAAiBK,IAAjB,CAAsB,IAAtB,CAAZ;AACD;AACD,aAAOH,MAAP;AACD;;;yBAEI1B,G,EAAKyB,M,EAAQD,K,EAAO;AACvB,UAAMM,UAAU,EAAhB;;AAEA,WAAK,IAAIC,MAAM,CAAf,EAAkBA,MAAM,EAAxB,EAA4BA,KAA5B,EAAmC;AACjC,aAAK,IAAIC,MAAM,CAAf,EAAkBA,MAAM,EAAxB,EAA4BA,KAA5B,EAAmC;AACjC,cAAIC,IAAID,MAAMF,OAAd;AACA,cAAII,IAAIH,MAAMD,OAAd;;AAEA,cAAI,KAAKR,IAAL,CAAUS,GAAV,EAAeC,GAAf,CAAJ,EAAyB;AACvBhC,gBAAImC,SAAJ,GAAgB,KAAKb,IAAL,CAAUS,GAAV,EAAeC,GAAf,EAAoBI,KAApC;AACApC,gBAAIqC,QAAJ,CAAaJ,CAAb,EAAgBC,CAAhB,EAAmBJ,OAAnB,EAA2BA,OAA3B;AACA9B,gBAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,gBAAIuC,WAAJ,GAAkB,MAAlB;AACAvC,gBAAIwC,UAAJ,CAAeP,CAAf,EAAiBC,CAAjB,EAAmBJ,OAAnB,EAA2BA,OAA3B;AACD,WAND,MAOK;AACH9B,gBAAImC,SAAJ,GAAgB,MAAhB;AACAnC,gBAAIqC,QAAJ,CAAaJ,CAAb,EAAgBC,CAAhB,EAAmBJ,OAAnB,EAA2BA,OAA3B;;AAEA9B,gBAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,gBAAIuC,WAAJ,GAAkB,MAAlB;AACAvC,gBAAIwC,UAAJ,CAAeP,CAAf,EAAiBC,CAAjB,EAAmBJ,OAAnB,EAA2BA,OAA3B;;AAEA9B,gBAAIR,SAAJ,CAAcyC,CAAd,EAAiBC,CAAjB,EAAoBD,IAAIH,OAAxB,EAAiCI,IAAIJ,OAArC;AACD;AACF;AACF;AAEF;;;4BAEO9B,G,EAAK+B,G,EAAK;AAChB,UAAMD,UAAU,EAAhB;AACA,WAAK,IAAIE,MAAM,CAAf,EAAkBA,MAAM,EAAxB,EAA4BA,KAA5B,EAAmC;AACjC,YAAIC,IAAID,MAAMF,OAAd;AACA,YAAII,IAAIH,MAAMD,OAAd;AACA9B,YAAImC,SAAJ,GAAgB,MAAhB;AACAnC,YAAIqC,QAAJ,CAAaJ,CAAb,EAAgBC,CAAhB,EAAmBJ,OAAnB,EAA2BA,OAA3B;AACA9B,YAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,YAAIuC,WAAJ,GAAkB,MAAlB;AACAvC,YAAIwC,UAAJ,CAAeP,CAAf,EAAiBC,CAAjB,EAAmBJ,OAAnB,EAA2BA,OAA3B;AACD;AACF;;;6BAEQ9B,G,EAAK+B,G,EAAK;AACjB,UAAMD,UAAU,EAAhB;AACA,WAAK,IAAIE,MAAM,CAAf,EAAkBA,MAAM,EAAxB,EAA4BA,KAA5B,EAAmC;AACjC,YAAIC,IAAID,MAAMF,OAAd;AACA,YAAII,IAAIH,MAAMD,OAAd;AACA9B,YAAImC,SAAJ,GAAgB,SAAhB;AACAnC,YAAIqC,QAAJ,CAAaJ,CAAb,EAAgBC,CAAhB,EAAmBJ,OAAnB,EAA2BA,OAA3B;AACA9B,YAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,YAAIuC,WAAJ,GAAkB,MAAlB;AACAvC,YAAIwC,UAAJ,CAAeP,CAAf,EAAiBC,CAAjB,EAAmBJ,OAAnB,EAA2BA,OAA3B;AACD;AACF;;;4BAEO9B,G,EAAI;AAAA;;AACV,WAAKyC,MAAL,CAAYzC,GAAZ;AACA0C,iBAAW,YAAM;AACf,cAAKC,QAAL,CAAc3C,GAAd;AACD,OAFD,EAEG,IAFH;AAGD;;;2BAEMA,G,EAAK;AAAA;;AACV,UAAI4C,IAAI,EAAR;AACA,UAAIC,kBAAkBC,YAAa,YAAK;AACtC,YAAGF,MAAM,CAAT,EAAY;AACZG,wBAAcF,eAAd;AACC;AACA,eAAKG,OAAL,CAAahD,GAAb,EAAkB4C,GAAlB;AACF,OALqB,EAKnB,EALmB,CAAtB;AAMD;;;6BAEQ5C,G,EAAK;AAAA;;AACZ,UAAIiD,IAAI,CAAR;AACA,UAAIC,oBAAoBJ,YAAa,YAAK;AACxC,YAAGG,MAAM,EAAT,EAAa;AACbF,wBAAcG,iBAAd;AACC;AACD,eAAKC,QAAL,CAAcnD,GAAd,EAAmBiD,GAAnB;AACD,OALuB,EAKrB,EALqB,CAAxB;AAMD;;;wBAEG5C,M,EAAQ;AAAA,mCACEA,MADF;AAAA,UACN4B,CADM;AAAA,UACHC,CADG;;AAEV,aAAO,KAAKZ,IAAL,CAAUW,CAAV,EAAaC,CAAb,CAAP;AACD;;;2BAEMkB,K,EAAO;AAAA;;AACZA,YAAM/C,MAAN,CAAagD,OAAb,CAAqB,kBAAU;AAAA,sCACjBhD,MADiB;AAAA,YACzB4B,CADyB;AAAA,YACtBC,CADsB;;AAE7B,eAAKZ,IAAL,CAAUW,CAAV,EAAaC,CAAb,IAAkBkB,KAAlB;AACD,OAHD;AAID;;;2BAEMA,K,EAAO;AAAA;;AACZA,YAAM/C,MAAN,CAAagD,OAAb,CAAqB,kBAAU;AAAA,sCACjBhD,MADiB;AAAA,YACzB4B,CADyB;AAAA,YACtBC,CADsB;;AAE7B,eAAKZ,IAAL,CAAUW,CAAV,EAAaC,CAAb,IAAkB,IAAlB;AACD,OAHD;AAID;;;oCAEc;;AAEb,UAAIoB,WAAW,EAAf;AACA,UAAMxB,UAAU,EAAhB;;AAEA,WAAK,IAAIC,MAAM,CAAf,EAAkBA,MAAM,EAAxB,EAA4BA,KAA5B,EAAmC;AACjC,YAAIwB,UAAU,IAAd;AACA,aAAK,IAAIvB,MAAM,CAAf,EAAkBA,MAAM,EAAxB,EAA4BA,KAA5B,EAAmC;AACjC,cAAI,KAAKV,IAAL,CAAUS,GAAV,EAAeC,GAAf,MAAwB,IAA5B,EAAkC;AAChCuB,sBAAU,KAAV;AACD;AACF;AACD,YAAGA,OAAH,EAAW;AACTD,mBAAS3B,IAAT,CAAcI,GAAd;AACD;AACF;AACD,UAAIuB,SAASE,MAAT,IAAmB,CAAvB,EAA0B;AACxB,aAAKnC,WAAL,IAAoB,CAApB;AACD;AACD,WAAKA,WAAL,IAAoBiC,SAASE,MAA7B;;AAEA,UAAIF,SAASE,MAAT,GAAkB,CAAtB,EAAyB;AACvB,aAAKC,UAAL,CAAgBH,QAAhB;AACA,aAAKI,WAAL;AACD;AACF;;;+BAEUC,U,EAAY;AAAA;;AACrBA,iBAAWN,OAAX,CAAoB,eAAO;AACzB,eAAKO,SAAL,CAAe7B,GAAf;AACD,OAFD;AAGD;;;8BAES8B,S,EAAW;AACnB,WAAKvC,IAAL,CAAUwC,MAAV,CAAiBD,SAAjB,EAA2B,CAA3B;AACA,WAAKvC,IAAL,CAAUyC,OAAV,CAAkB,IAAInC,KAAJ,CAAU,EAAV,EAAcC,IAAd,CAAmB,IAAnB,CAAlB;AACD;;;kCAEa;AACZ,WAAKmC,WAAL;AACA,WAAKC,WAAL;AACD;;;kCAEa;AACZ,UAAIC,eAAeC,SAASC,cAAT,CAAwB,OAAxB,CAAnB;AACA,UAAIC,QAAQ,KAAKhD,WAAL,GAAmB,EAA/B;AACA,UAAIiD,YAAYH,SAASI,cAAT,CAAwBF,KAAxB,CAAhB;AACAH,mBAAaM,SAAb,GAAyB,GAAzB;AACAN,mBAAaO,WAAb,CAAyBH,SAAzB;AACD;;;iCAEY;AACX,UAAIJ,eAAeC,SAASC,cAAT,CAAwB,OAAxB,CAAnB;AACAF,mBAAaM,SAAb,GAAyB,GAAzB;AACA,UAAIE,eAAeP,SAASC,cAAT,CAAwB,OAAxB,CAAnB;AACAM,mBAAaF,SAAb,GAAyB,GAAzB;AACD;;;kCAEa;AACZ,WAAKpD,KAAL,GAAa,IAAIuD,KAAKC,KAAL,CAAW,KAAKvD,WAAL,GAAmB,EAA9B,CAAjB;AACA,UAAIqD,eAAeP,SAASC,cAAT,CAAwB,OAAxB,CAAnB;AACA,UAAIS,YAAYV,SAASI,cAAT,CAAwB,KAAKnD,KAA7B,CAAhB;AACAsD,mBAAaF,SAAb,GAAyB,GAAzB;AACAE,mBAAaD,WAAb,CAAyBI,SAAzB;AACD;;;0BAEKzB,K,EAAO;AACX,WAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIQ,MAAM/C,MAAN,CAAamD,MAAjC,EAAyCZ,GAAzC,EAA8C;AAC5C,YAAIkC,QAAQ1B,MAAM/C,MAAN,CAAauC,CAAb,CAAZ;;AAD4C,oCAE/BkC,KAF+B;AAAA,YAEvC7C,CAFuC;AAAA,YAEpCC,CAFoC;;AAG5C,YAAID,MAAM,CAAV,EAAa;AACX,iBAAO,IAAP;AACD;AACF;AACD,aAAO,KAAP;AACD;;;8BAESmB,K,EAAO;AACd,WAAK,IAAIR,IAAI,CAAb,EAAgBA,IAAIQ,MAAM/C,MAAN,CAAamD,MAAjC,EAAyCZ,GAAzC,EAA8C;AAC5C,YAAIkC,QAAQ1B,MAAM/C,MAAN,CAAauC,CAAb,CAAZ;;AAD4C,qCAE/BkC,KAF+B;AAAA,YAEvC7C,CAFuC;AAAA,YAEpCC,CAFoC;;AAG5C,YAAID,MAAM,EAAN,IAAc,CAACmB,MAAM2B,cAAN,CAAqB,CAAC9C,IAAI,CAAL,EAAQC,CAAR,CAArB,CAAD,IAAqC,KAAK8C,MAAL,CAAY,CAAC/C,IAAK,CAAN,EAASC,CAAT,CAAZ,CAAvD,EAAkF;AAChF,iBAAO,IAAP;AACD;AACF;AACD,aAAO,KAAP;AACD;;;2BAEM7B,M,EAAQ;AACb,aAAO,KAAK4E,GAAL,CAAS5E,MAAT,MAAqB,IAA5B;AACD;;;oCAEe+C,K,EAAO;AACrB,UAAI8B,kBAAkB9B,MAAM+B,kBAAN,EAAtB;AACA,WAAK,IAAIvC,IAAI,CAAb,EAAgBA,IAAIsC,gBAAgB1B,MAApC,EAA4CZ,GAA5C,EAAiD;AAAA,gDAClCsC,gBAAgBtC,CAAhB,CADkC;AAAA,YAC1CX,CAD0C;AAAA,YACvCC,CADuC;;AAE/C,YAAK,CAAC,KAAKkD,YAAL,CAAkBnD,CAAlB,EAAqBC,CAArB,CAAF,IAA+B,KAAKmD,QAAL,CAAcpD,CAAd,EAAiBC,CAAjB,KAAwB,CAACkB,MAAM2B,cAAN,CAAqB,CAAC9C,CAAD,EAAGC,CAAH,CAArB,CAA5D,EAA2F;AACzF,iBAAO,KAAP;AACD;AACF;AACD,aAAO,IAAP;AACD;;;oCAEekB,K,EAAOkC,K,EAAOC,K,EAAM;AAClC,WAAK,IAAI3C,IAAI,CAAb,EAAgBA,IAAIQ,MAAM/C,MAAN,CAAamD,MAAjC,EAAyCZ,GAAzC,EAA8C;AAC5C,YAAIkC,QAAQ1B,MAAM/C,MAAN,CAAauC,CAAb,CAAZ;;AAD4C,qCAErBkC,KAFqB;AAAA,YAEvCU,MAFuC;AAAA,YAE/BC,MAF+B;;AAG5C,YAAIxD,IAAIuD,SAASF,KAAjB;AACA,YAAIpD,IAAIuD,SAASF,KAAjB;;AAEA,YAAK,CAAC,KAAKH,YAAL,CAAkBnD,CAAlB,EAAqBC,CAArB,CAAF,IAA+B,KAAKmD,QAAL,CAAcpD,CAAd,EAAiBC,CAAjB,KAAwB,CAACkB,MAAM2B,cAAN,CAAqB,CAAC9C,CAAD,EAAGC,CAAH,CAArB,CAA5D,EAA2F;AACzF,iBAAO,KAAP;AACD;AACF;AACD,aAAO,IAAP;AACD;;;iCAEYD,C,EAAGC,C,EAAG;AACjB,aAASA,KAAK,CAAL,IAAUA,IAAI,EAAhB,IAAuBD,IAAI,EAAlC;AACD;;;6BAEQA,C,EAAGC,C,EAAE;AACZ,aAAO,KAAKZ,IAAL,CAAUW,CAAV,EAAaC,CAAb,MAAoB,IAA3B;AACD;;;;;;kBAGWf,K;;;;;;;;;;;;;;;ACpPf;;;;AACA;;;;;;;;IAEMuE,Q;AACJ,oBAAYC,IAAZ,EAAkB3F,GAAlB,EAAsB;AAAA;;AAAA;;AACpB,SAAK2F,IAAL,GAAYA,IAAZ;AACA,SAAK3F,GAAL,GAAWA,GAAX;AACAmE,aAASyB,IAAT,CAAcC,SAAd,GAA0B,UAACC,CAAD;AAAA,aAAO,MAAKC,eAAL,CAAqBD,CAArB,CAAP;AAAA,KAA1B;AACA3B,aAASyB,IAAT,CAAcI,OAAd,GAAwB,UAACF,CAAD;AAAA,aAAO,MAAKG,iBAAL,CAAuBH,CAAvB,CAAP;AAAA,KAAxB;AACA,SAAKI,UAAL,GAAkB,IAAlB;AACA,SAAKC,YAAL,GAAoB,GAApB;AACA,SAAKC,KAAL,GAAa,GAAb;AACA,SAAKC,WAAL,GAAmB,KAAnB;AACD;;;;sCAEiBP,C,EAAG;AACnBA,QAAEQ,cAAF;AACA,cAAQR,EAAES,GAAV;AACA,aAAK,WAAL;AACEpC,mBAASC,cAAT,CAAwB,MAAxB,EAAgCoC,KAAhC,CAAsCpE,KAAtC,GAA8C,OAA9C;AACA;AACF,aAAK,YAAL;AACE+B,mBAASC,cAAT,CAAwB,OAAxB,EAAiCoC,KAAjC,CAAuCpE,KAAvC,GAA+C,OAA/C;AACA;AACF,aAAK,WAAL;AACI+B,mBAASC,cAAT,CAAwB,MAAxB,EAAgCoC,KAAhC,CAAsCpE,KAAtC,GAA8C,OAA9C;AACF;AACF,aAAK,SAAL;AACE+B,mBAASC,cAAT,CAAwB,IAAxB,EAA8BoC,KAA9B,CAAoCpE,KAApC,GAA4C,OAA5C;AACA;AACF,aAAK,GAAL;AACE+B,mBAASC,cAAT,CAAwB,OAAxB,EAAiCoC,KAAjC,CAAuCpE,KAAvC,GAA+C,OAA/C;AACA;AAfF;AAiBD;;;oCAEe0D,C,EAAE;AAChBA,QAAEQ,cAAF;AACA,cAAQR,EAAES,GAAV;AACA,aAAK,WAAL;AACE,eAAKZ,IAAL,CAAU5E,QAAV;AACAoD,mBAASC,cAAT,CAAwB,MAAxB,EAAgCoC,KAAhC,CAAsCpE,KAAtC,GAA8C,MAA9C;AACA;AACF,aAAK,YAAL;AACE,eAAKuD,IAAL,CAAU3E,SAAV;AACAmD,mBAASC,cAAT,CAAwB,OAAxB,EAAiCoC,KAAjC,CAAuCpE,KAAvC,GAA+C,MAA/C;AACA;AACF,aAAK,WAAL;AACE,eAAKuD,IAAL,CAAUc,IAAV;AACAtC,mBAASC,cAAT,CAAwB,MAAxB,EAAgCoC,KAAhC,CAAsCpE,KAAtC,GAA8C,MAA9C;AACA;AACF,aAAK,SAAL;AACE,eAAKuD,IAAL,CAAUzE,MAAV;AACAiD,mBAASC,cAAT,CAAwB,IAAxB,EAA8BoC,KAA9B,CAAoCpE,KAApC,GAA4C,MAA5C;AACA;AACF,aAAK,GAAL;AACE,eAAKuD,IAAL,CAAUe,IAAV;AACA,eAAKf,IAAL,CAAUc,IAAV;AACAtC,mBAASC,cAAT,CAAwB,OAAxB,EAAiCoC,KAAjC,CAAuCpE,KAAvC,GAA+C,MAA/C;AACA;AACF,aAAK,GAAL;AACE,cAAG,KAAKiE,WAAR,EAAoB;AAClB,iBAAKM,KAAL;AACD;AACD;AACF,aAAK,GAAL;AACE,eAAKhB,IAAL,CAAUiB,UAAV;AACA;AA7BF;AA+BD;;;4BAEM;AACLC,YAAM,SAAN;AACD;;;4BAEM;AAAA;;AACL,WAAKR,WAAL,GAAmB,IAAnB;AACA,UAAIS,aAAa,KAAKV,KAAtB;;AAEA,WAAKF,UAAL,GAAkBpD,YAAY,YAAM;AAClC,eAAK6C,IAAL,CAAUc,IAAV;AACA,YAAIL,QAAQ,OAAKD,YAAL,GAAoB,GAApB,GAA2B,OAAKR,IAAL,CAAU7G,KAAV,CAAgBsC,KAAhB,GAAwB,GAA/D;AACA,YAAIgF,QAAQ,GAAZ,EAAiB;AAAEA,kBAAQ,GAAR;AAAc;AACjC,YAAGU,cAAcV,KAAjB,EAAuB;AACrBrD,wBAAc,OAAKmD,UAAnB;AACA,iBAAKE,KAAL,GAAaA,KAAb;AACAU,uBAAaV,KAAb;AACA,iBAAKW,KAAL;AACD;AACF,OAViB,EAUfD,UAVe,CAAlB;AAWAE,4BAAsB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAtB;AACD;;;8BAEQ;AACP,WAAKvB,IAAL,CAAUhG,IAAV;AACA,UAAI,KAAKgG,IAAL,CAAU1G,IAAd,EAAoB;AAClB,aAAK0G,IAAL,CAAUwB,aAAV,CAAwB,KAAKnH,GAA7B;AACA+C,sBAAc,KAAKmD,UAAnB;AACA,aAAKG,WAAL,GAAmB,KAAnB;AACAlC,iBAASC,cAAT,CAAwB,OAAxB,EAAiCgD,QAAjC,GAA4C,KAA5C;AACA;AACD;AACDJ,4BAAsB,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAAtB;AACD;;;oCAEc;AACb,UAAIG,QAAQ,IAAIC,KAAJ,CAAU,oBAAV,CAAZ;AACAD,YAAME,IAAN;AACD;;;;;;kBAIY7B,Q;;;;;;;;;;;;;;;;;;;;;;;AChHf,IAAM8B,SAAS;AACbpF,SAAO,QADM;AAEb/B,UAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAFK;AAGbC,iBAAe,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAHF;AAIbC,UAAQ,CAAC,CAAD,EAAI,CAAJ,CAJK;AAKbC,iBAAe,CAAC,CAAD,EAAI,CAAJ,CALF;AAMbiH,QAAM,aANO;AAOb9H,QAAM,mBAAO;AACXK,QAAImC,SAAJ,GAAgB,QAAhB;AACAnC,QAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,QAAIuC,WAAJ,GAAkB,MAAlB;AACAvC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACD;AAnBY,CAAf;;AAsBA,IAAMkF,SAAS;AACbtF,SAAO,SADM;AAEb/B,UAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAFK;AAGbC,iBAAe,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAHF;AAIbmH,QAAM,aAJO;AAKblH,UAAQ,CAAC,CAAD,EAAI,CAAJ,CALK;AAMbC,iBAAe,CAAC,CAAD,EAAI,CAAJ,CANF;AAObb,QAAM,mBAAO;AACXK,QAAImC,SAAJ,GAAgB,SAAhB;AACAnC,QAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,QAAIuC,WAAJ,GAAkB,MAAlB;;AAEAvC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;;AAEAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;;AAEAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;;AAEAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACD;AAvBY,CAAf;;AA0BA,IAAMmF,SAAS;AACbvF,SAAO,OADM;AAEb/B,UAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAFK;AAGbC,iBAAe,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAHF;AAIbmH,QAAM,aAJO;AAKblH,UAAQ,CAAC,CAAD,EAAI,CAAJ,CALK;AAMbC,iBAAe,CAAC,CAAD,EAAI,CAAJ,CANF;AAObb,QAAM,mBAAO;AACXK,QAAImC,SAAJ,GAAgB,OAAhB;AACAnC,QAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,QAAIuC,WAAJ,GAAkB,MAAlB;;AAEAvC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACD;;AApBY,CAAf;;AAwBA,IAAMoF,SAAS;AACbxF,SAAO,OADM;AAEb/B,UAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAFK;AAGbC,iBAAe,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAHF;AAIbC,UAAQ,CAAC,CAAD,EAAI,CAAJ,CAJK;AAKbC,iBAAe,CAAC,CAAD,EAAI,CAAJ,CALF;AAMbiH,QAAM,aANO;AAOb9H,QAAM,mBAAO;AACXK,QAAImC,SAAJ,GAAgB,OAAhB;AACAnC,QAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,QAAIuC,WAAJ,GAAkB,MAAlB;;AAEAvC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACD;AApBY,CAAf;;AAuBA,IAAMqF,SAAS;AACbzF,SAAO,KADM;AAEb/B,UAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAFK;AAGbC,iBAAe,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAHF;AAIbC,UAAQ,CAAC,CAAD,EAAI,CAAJ,CAJK;AAKbC,iBAAe,CAAC,CAAD,EAAI,CAAJ,CALF;AAMbiH,QAAM,aANO;AAOb9H,QAAM,mBAAO;AACXK,QAAImC,SAAJ,GAAgB,KAAhB;AACAnC,QAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,QAAIuC,WAAJ,GAAkB,MAAlB;;AAEAvC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACD;AApBY,CAAf;;AAuBA,IAAMsF,SAAS;AACb1F,SAAO,QADM;AAEb/B,UAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAFK;AAGbC,iBAAe,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAHF;AAIbC,UAAQ,CAAC,CAAD,EAAI,CAAJ,CAJK;AAKbC,iBAAe,CAAC,CAAD,EAAI,CAAJ,CALF;AAMbiH,QAAM,aANO;AAOb9H,QAAM,mBAAO;AACXK,QAAImC,SAAJ,GAAgB,QAAhB;AACAnC,QAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,QAAIuC,WAAJ,GAAkB,MAAlB;;AAEAvC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACD;AApBY,CAAf;;AAuBA,IAAMuF,SAAS;AACb3F,SAAO,MADM;AAEb/B,UAAQ,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAFK;AAGbC,iBAAe,CAAC,CAAC,CAAD,EAAI,CAAJ,CAAD,EAAQ,CAAC,CAAD,EAAI,CAAJ,CAAR,EAAe,CAAC,CAAD,EAAI,CAAJ,CAAf,EAAsB,CAAC,CAAD,EAAI,CAAJ,CAAtB,CAHF;AAIbC,UAAQ,CAAC,CAAD,EAAI,CAAJ,CAJK;AAKbC,iBAAe,CAAC,CAAD,EAAI,CAAJ,CALF;AAMbiH,QAAM,aANO;AAOb9H,QAAM,mBAAO;AACXK,QAAImC,SAAJ,GAAgB,MAAhB;AACAnC,QAAIsC,SAAJ,GAAgB,CAAhB;AACAtC,QAAIuC,WAAJ,GAAkB,MAAlB;;AAEAvC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACAxC,QAAIqC,QAAJ,CAAa,EAAb,EAAiB,EAAjB,EAAqB,EAArB,EAAyB,EAAzB;AACArC,QAAIwC,UAAJ,CAAe,EAAf,EAAmB,EAAnB,EAAuB,EAAvB,EAA2B,EAA3B;AACD;AApBY,CAAf;;IAuBMwF,K;AACJ,iBAAYC,OAAZ,EAAoB;AAAA;;AAClB,SAAK5H,MAAL,GAAc4H,QAAQ5H,MAAtB;AACA,SAAKC,aAAL,GAAqB2H,QAAQ3H,aAA7B;AACA,SAAK8B,KAAL,GAAc6F,QAAQ7F,KAAtB;AACA,SAAKzC,IAAL,GAAcsI,QAAQtI,IAAtB;AACA,SAAKY,MAAL,GAAc0H,QAAQ1H,MAAtB;AACA,SAAKC,aAAL,GAAqByH,QAAQzH,aAA7B;;AAEA,SAAK0H,eAAL,GAAuBD,QAAQC,eAA/B;AACA,SAAKC,aAAL,GAAqB,CAArB;AACD;;;;2CAEqB;AACpB,UAAMC,SAASjE,SAASC,cAAT,CAAwB,gBAAxB,CAAf;AACAgE,aAAO3G,MAAP,GAAgB,GAAhB;AACA2G,aAAO5G,KAAP,GAAe,GAAf;AACA,UAAM6G,UAAUD,OAAOE,UAAP,CAAkB,IAAlB,CAAhB;AACAD,cAAQ7I,SAAR,CAAkB,CAAlB,EAAoB,CAApB,EAAsB,GAAtB,EAA0B,GAA1B;AACA,WAAKG,IAAL,CAAU0I,OAAV;AACD;;;qCAEgBrI,G,EAAK;AACpBA,UAAIR,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,GAApB,EAAyB,GAAzB;AACA,WAAKG,IAAL,CAAUK,GAAV;AACD;;;+BAEU;AACT,WAAKK,MAAL,GAAc,KAAKA,MAAL,CAAYkI,GAAZ,CAAiB,iBAAS;AAAA,oCACzBzD,KADyB;AAAA,YACjC7C,CADiC;AAAA,YAC9BC,CAD8B;;AAEtC,eAAO,CAACD,CAAD,EAAIC,IAAI,CAAR,CAAP;AACD,OAHa,CAAd;AAIA,WAAK3B,MAAL,GAAc,CAAC,KAAKA,MAAL,CAAY,CAAZ,CAAD,EAAiB,KAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAlC,CAAd;AACD;;;gCAEW;AACV,WAAKF,MAAL,GAAc,KAAKA,MAAL,CAAYkI,GAAZ,CAAiB,iBAAS;AAAA,qCACzBzD,KADyB;AAAA,YACjC7C,CADiC;AAAA,YAC9BC,CAD8B;;AAEtC,eAAO,CAACD,CAAD,EAAIC,IAAI,CAAR,CAAP;AACD,OAHa,CAAd;AAIA,WAAK3B,MAAL,GAAc,CAAC,KAAKA,MAAL,CAAY,CAAZ,CAAD,EAAiB,KAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAlC,CAAd;AACD;;;2BAEM;AACL,WAAKF,MAAL,GAAc,KAAKA,MAAL,CAAYkI,GAAZ,CAAgB,iBAAS;AAAA,qCACxBzD,KADwB;AAAA,YAChC7C,CADgC;AAAA,YAC7BC,CAD6B;;AAErC,eAAO,CAACD,IAAI,CAAL,EAAQC,CAAR,CAAP;AACD,OAHa,CAAd;AAIA,WAAK3B,MAAL,GAAc,CAAC,KAAKA,MAAL,CAAY,CAAZ,IAAiB,CAAlB,EAAqB,KAAKA,MAAL,CAAY,CAAZ,CAArB,CAAd;AACD;;;yCAEoB;AAAA;;AACnB,UAAIiI,aAAa,EAAjB;AACAA,mBAAa,KAAKnI,MAAL,CAAYkI,GAAZ,CAAgB,iBAAS;AACpC,eAAO,MAAKE,WAAL,CAAiB3D,KAAjB,CAAP;AACD,OAFY,CAAb;AAGA,aAAO0D,UAAP;AACD;;;6BAEQ;AAAA;;AACP,WAAKnI,MAAL,GAAc,KAAKA,MAAL,CAAYkI,GAAZ,CAAgB,iBAAS;AACrC,eAAO,OAAKE,WAAL,CAAiB3D,KAAjB,CAAP;AACD,OAFa,CAAd;AAGD;;;gCAEWA,K,EAAO;AAAA,mCACQ,KAAKvE,MADb;AAAA,UACZmI,OADY;AAAA,UACHC,OADG;;AAEjB,UAAIC,gBAAgB,CAAC9D,MAAM,CAAN,IAAW4D,OAAZ,EAAqB5D,MAAM,CAAN,IAAW6D,OAAhC,CAApB;AAFiB,UAGZ5G,GAHY,GAGA6G,aAHA;AAAA,UAGP5G,GAHO,GAGA4G,aAHA;;AAIjB,aAAO,CAAC5G,MAAM0G,OAAP,EAAiB3G,MAAM,CAAC,CAAR,GAAa4G,OAA7B,CAAP;AACD;;;mCAEc7D,K,EAAO;AACpB,WAAK,IAAIlC,IAAI,CAAb,EAAgBA,IAAI,KAAKvC,MAAL,CAAYmD,MAAhC,EAAwCZ,GAAxC,EAA6C;AAAA,uCACxB,KAAKvC,MAAL,CAAYuC,CAAZ,CADwB;AAAA,YACtCiG,IADsC;AAAA,YAChCC,IADgC;;AAE3C,YAAID,SAAS/D,MAAM,CAAN,CAAT,IAAqBgE,SAAShE,MAAM,CAAN,CAAlC,EAA4C;AAC1C,iBAAO,IAAP;AACD;AACF;AACD,aAAO,KAAP;AACD;;;;;;kBAKYkD,K;;AAEf;;IACMe,W;;;AACJ,uBAAYd,OAAZ,EAAqB;AAAA;;AAAA,qHACbA,OADa;AAEpB;;;EAHuBD,K;;AAM1B;;;IACMgB,W;;;AACJ,uBAAYf,OAAZ,EAAqB;AAAA;;AAAA,qHACbA,OADa;AAEpB;;;EAHuBD,K;;AAM1B;;;IACMiB,W;;;AACJ,uBAAYhB,OAAZ,EAAqB;AAAA;;AAAA,qHACbA,OADa;AAEpB;;;;6BACO;AACN;AACD;;;;EANuBD,K;;AAU1BA,MAAMkB,MAAN,GAAe,CAAC1B,MAAD,EAASE,MAAT,EAAiBC,MAAjB,EAAyBC,MAAzB,EAAiCC,MAAjC,EAAyCC,MAAzC,EAAiDC,MAAjD,CAAf;;AAEAC,MAAMrH,WAAN,GAAoB,YAAM;AACxB,MAAIwI,SAASxE,KAAKC,KAAL,CAAWD,KAAKwE,MAAL,KAAgB,CAA3B,CAAb;AACA,MAAIlB,UAAUD,MAAMkB,MAAN,CAAaC,MAAb,CAAd;;AAEA,UAAQlB,QAAQR,IAAhB;AACE,SAAK,aAAL;AACE,aAAO,IAAIwB,WAAJ,CAAgBhB,OAAhB,CAAP;AACF,SAAK,aAAL;AACE,aAAO,IAAIc,WAAJ,CAAgBd,OAAhB,CAAP;AACF,SAAK,aAAL;AACE,aAAO,IAAIe,WAAJ,CAAgBf,OAAhB,CAAP;AACF;AACExH,cAAQC,GAAR,CAAY,SAAZ;AARJ;AAUD,CAdD,C;;;;;;;;;ACtRA;;;;AACA;;;;;;AAGAyD,SAASiF,gBAAT,CAA0B,kBAA1B,EAA8C,YAAU;AACtD,MAAMhB,SAASjE,SAASC,cAAT,CAAwB,QAAxB,CAAf;AACAgE,SAAO5G,KAAP,GAAe,GAAf;AACA4G,SAAO3G,MAAP,GAAgB,GAAhB;AACA,MAAM4H,UAAUjB,OAAOE,UAAP,CAAkB,IAAlB,CAAhB;AACA;;AAEA,MAAMgB,aAAanF,SAASC,cAAT,CAAwB,gBAAxB,CAAnB;AACAkF,aAAW9H,KAAX,GAAmB,GAAnB;AACA8H,aAAW7H,MAAX,GAAoB,GAApB;AACA,MAAM8H,cAAcD,WAAWhB,UAAX,CAAsB,IAAtB,CAApB;;AAEA,qBAASe,OAAT,EAAkBvK,KAAlB,CAAwBmB,OAAxB,CAAgCoJ,OAAhC;;AAEAlF,WAASC,cAAT,CAAwB,OAAxB,EAAiCgF,gBAAjC,CAAkD,OAAlD,EAA2D,UAACtD,CAAD,EAAO;AAChE3B,aAASC,cAAT,CAAwB,OAAxB,EAAiCgD,QAAjC,GAA4C,IAA5C;AACA,QAAMzB,OAAO,mBAAS0D,OAAT,EAAkBE,WAAlB,CAAb;AACA,4BAAa5D,IAAb,EAAmB0D,OAAnB,EAA4BtC,KAA5B;AACD,GAJD;;AAMA5C,WAASC,cAAT,CAAwB,OAAxB,EAAiCgF,gBAAjC,CAAkD,OAAlD,EAA2D,UAACtD,CAAD,EAAO;AAChE,QAAIuB,QAAQlD,SAASC,cAAT,CAAwB,cAAxB,CAAZ;AACA,QAAIiD,MAAMmC,MAAV,EAAkB;AACdnC,YAAME,IAAN;AACApD,eAASC,cAAT,CAAwB,YAAxB,EAAsCoC,KAAtC,CAA4CpE,KAA5C,GAAoD,MAApD;AACA+B,eAASC,cAAT,CAAwB,UAAxB,EAAoCoC,KAApC,CAA0CpE,KAA1C,GAAkD,MAAlD;AACH,KAJD,MAIK;AACDiF,YAAMV,KAAN;AACAxC,eAASC,cAAT,CAAwB,YAAxB,EAAsCoC,KAAtC,CAA4CpE,KAA5C,GAAoD,MAApD;AACA+B,eAASC,cAAT,CAAwB,UAAxB,EAAoCoC,KAApC,CAA0CpE,KAA1C,GAAkD,MAAlD;AACA;AACH;AACF,GAZD;AAcD,CAlCD,E","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 50be6f8f56a6682e233a","import Board from './board';\nimport Piece from './pieces';\n\nclass Game {\n  constructor(ctxMain, ctxNext) {\n    this.board = new Board(ctxMain);\n    this.ctxMain = ctxMain;\n    this.ctxNext = ctxNext;\n    this.spawnPiece();\n    this.insert();\n    this.over = false;\n    this.canHold = true;\n  }\n\n  move(){\n    this.drop();\n    this.insert();\n  }\n\n  clearFullRows() {\n    this.board.clearFullRows();\n  }\n\n  gameOver(){\n    return (this.collision(this.currentTetromino) && this.board.onTop(this.currentTetromino))\n  }\n\n  draw(){\n      this.ctxMain.clearRect(0, 0, Game.WIDTH, Game.HEIGHT);\n      this.board.draw(this.ctxMain);\n      this.nextTetromino.previewTetromino(this.ctxNext);\n      if(this.holdTetromino){\n        this.holdTetromino.previewHoldTetromino();\n      }\n  }\n\n  drawEndOfGame(ctx) {\n    this.board.drawEnd(ctx);\n    this.board.resetScore();\n  }\n\n  handleHold() {\n    if (this.canHold) {\n      if(this.holdTetromino) {\n        let temp = this.currentTetromino;\n        this.board.remove(this.currentTetromino);\n\n        this.currentTetromino = this.holdTetromino;\n        this.holdTetromino = temp;\n\n        this.currentTetromino.coords = this.currentTetromino.defaultCoords;\n        this.currentTetromino.center = this.currentTetromino.defaultCenter;\n        this.canHold = false;\n      }else {\n        if(this.currentTetromino){\n          this.holdTetromino = this.currentTetromino;\n          this.board.remove(this.currentTetromino);\n          this.spawnPiece();\n        }\n      }\n      this.insert();\n    } else {\n      console.log(\"can't hold again same piece\");\n    }\n\n  }\n\n  spawnPiece(){\n    if (!this.nextTetromino) {\n      this.currentTetromino = Piece.randomPiece();\n    } else {\n      this.currentTetromino = this.nextTetromino;\n    }\n    this.nextTetromino = Piece.randomPiece();\n    this.canHold = true;\n  }\n\n  insert() {\n    this.board.update(this.currentTetromino);\n  }\n\n  drop(){\n    if(this.gameOver()){\n      this.over = true;\n    }\n    else if (this.collision()) {\n      this.clearFullRows();\n      this.spawnPiece();\n    }\n    else {\n      this.board.remove(this.currentTetromino);\n      this.currentTetromino.drop();\n    }\n  }\n\n  collision() {\n    return this.board.collision(this.currentTetromino);\n  }\n\n  moveLeft(){\n    if(this.board.movementAllowed(this.currentTetromino, 0, -1)){\n      this.board.remove(this.currentTetromino);\n      this.currentTetromino.moveLeft();\n      this.insert();\n    }\n  }\n\n  moveRight(){\n    if(this.board.movementAllowed(this.currentTetromino, 0, 1)){\n      this.board.remove(this.currentTetromino);\n      this.currentTetromino.moveRight();\n      this.insert();\n    }\n  }\n\n  slam(){\n    while(this.board.movementAllowed(this.currentTetromino, 1, 0)){\n      this.drop();\n    }\n    this.board.remove(this.currentTetromino);\n    this.insert();\n  }\n\n  rotate() {\n    if (this.board.rotationAllowed(this.currentTetromino)){\n      this.board.remove(this.currentTetromino);\n      this.currentTetromino.rotate(this.currentTetromino);\n      this.insert();\n    } else { }\n  }\n\n}\n\nGame.WIDTH = 200;\nGame.HEIGHT = 400;\n\nexport default Game;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game.js","class Board {\n  constructor(ctx) {\n    this.level = 1;\n    this.clearedRows = 0;\n    this.grid = this.createMatrix(10, 20);\n    this.ctx = ctx;\n  }\n\n  createMatrix(width, height) {\n    const matrix = [];\n    while (height--) {\n      matrix.push(new Array(width).fill(null));\n    }\n    return matrix;\n  }\n\n  draw(ctx, height, width) {\n    const padding = 20;\n\n    for (var row = 0; row < 20; row++) {\n      for (let col = 0; col < 10; col++) {\n        let x = col * padding;\n        let y = row * padding;\n\n        if (this.grid[row][col]) {\n          ctx.fillStyle = this.grid[row][col].color;\n          ctx.fillRect(x, y, padding,padding);\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = \"#666\";\n          ctx.strokeRect(x,y,padding,padding);\n        }\n        else {\n          ctx.fillStyle = \"#666\";\n          ctx.fillRect(x, y, padding,padding);\n\n          ctx.lineWidth = 1;\n          ctx.strokeStyle = \"#888\";\n          ctx.strokeRect(x,y,padding,padding);\n\n          ctx.clearRect(x, y, x + padding, y + padding);\n        }\n      }\n    }\n\n  }\n\n  drawRow(ctx, row) {\n    const padding = 20;\n    for (let col = 0; col < 10; col++) {\n      let x = col * padding;\n      let y = row * padding;\n      ctx.fillStyle = \"#666\";\n      ctx.fillRect(x, y, padding,padding);\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = \"#999\";\n      ctx.strokeRect(x,y,padding,padding);\n    }\n  }\n\n  clearRow(ctx, row) {\n    const padding = 20;\n    for (let col = 0; col < 10; col++) {\n      let x = col * padding;\n      let y = row * padding;\n      ctx.fillStyle = \"#c4d0b0\";\n      ctx.fillRect(x, y, padding,padding);\n      ctx.lineWidth = 1;\n      ctx.strokeStyle = \"#888\";\n      ctx.strokeRect(x,y,padding,padding);\n    }\n  }\n\n  drawEnd(ctx){\n    this.addAll(ctx);\n    setTimeout(() => {\n      this.clearAll(ctx)\n    }, 1300);\n  }\n\n  addAll(ctx) {\n    let i = 19;\n    let addRowsInterval = setInterval( ()=> {\n      if(i === 0) {\n      clearInterval(addRowsInterval);\n      }\n       this.drawRow(ctx, i--);\n    }, 50);\n  }\n\n  clearAll(ctx) {\n    let j = 0;\n    let clearRowsInterval = setInterval( ()=> {\n      if(j === 20) {\n      clearInterval(clearRowsInterval);\n      }\n      this.clearRow(ctx, j++);\n    }, 50);\n  }\n\n  pos(coords) {\n    let[x, y] = coords;\n    return this.grid[x][y];\n  }\n\n  update(piece) {\n    piece.coords.forEach(coords => {\n      let[x, y] = coords;\n      this.grid[x][y] = piece;\n    });\n  }\n\n  remove(piece) {\n    piece.coords.forEach(coords => {\n      let[x, y] = coords;\n      this.grid[x][y] = null;\n    });\n  }\n\n  clearFullRows(){\n\n    let fullRows = [];\n    const padding = 20;\n\n    for (var row = 0; row < 20; row++) {\n      let fullRow = true;\n      for (let col = 0; col < 10; col++) {\n        if (this.grid[row][col] === null) {\n          fullRow = false;\n        }\n      }\n      if(fullRow){\n        fullRows.push(row);\n      }\n    }\n    if (fullRows.length == 4) {\n      this.clearedRows += 2;\n    }\n    this.clearedRows += fullRows.length;\n\n    if (fullRows.length > 0) {\n      this.removeRows(fullRows);\n      this.updateStats();\n    }\n  }\n\n  removeRows(rowNumbers) {\n    rowNumbers.forEach( row => {\n      this.removeRow(row);\n    });\n  }\n\n  removeRow(rowNumber) {\n    this.grid.splice(rowNumber,1);\n    this.grid.unshift(new Array(10).fill(null));\n  }\n\n  updateStats() {\n    this.updateScore();\n    this.updateLevel();\n  }\n\n  updateScore() {\n    let scoreElement = document.getElementById(\"score\");\n    let score = this.clearedRows * 50;\n    let scoreText = document.createTextNode(score);\n    scoreElement.innerText = \" \";\n    scoreElement.appendChild(scoreText);\n  }\n\n  resetScore() {\n    let scoreElement = document.getElementById(\"score\");\n    scoreElement.innerText = \"0\";\n    let levelElement = document.getElementById(\"level\");\n    levelElement.innerText = \"1\";\n  }\n\n  updateLevel() {\n    this.level = 1 + Math.floor(this.clearedRows / 10);\n    let levelElement = document.getElementById(\"level\");\n    let levelText = document.createTextNode(this.level);\n    levelElement.innerText = \" \";\n    levelElement.appendChild(levelText);\n  }\n\n  onTop(piece) {\n    for (let i = 0; i < piece.coords.length; i++) {\n      let coord = piece.coords[i];\n      let [x, y] = coord;\n      if (x === 0) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n  collision(piece) {\n     for (let i = 0; i < piece.coords.length; i++) {\n       let coord = piece.coords[i];\n       let [x, y] = coord;\n       if (x === 19  || (!piece.coordsIncluded([x + 1, y]) && this.filled([x  + 1, y]))) {\n         return true;\n       }\n     }\n     return false;\n   }\n\n   filled(coords) {\n     return this.pos(coords) !== null;\n   }\n\n   rotationAllowed(piece) {\n     let potentialCoords = piece.nextRotationCoords();\n     for (let i = 0; i < potentialCoords.length; i++) {\n       let [x, y] = potentialCoords[i];\n       if( (!this.inBoundaries(x, y)) || (this.occupied(x, y) &&  !piece.coordsIncluded([x,y])) ) {\n         return false;\n       }\n     }\n     return true;\n   }\n\n   movementAllowed(piece, xMove, yMove){\n     for (let i = 0; i < piece.coords.length; i++) {\n       let coord = piece.coords[i];\n       let [pieceX, pieceY] = coord;\n       let x = pieceX + xMove;\n       let y = pieceY + yMove;\n\n       if( (!this.inBoundaries(x, y)) || (this.occupied(x, y) &&  !piece.coordsIncluded([x,y])) ) {\n         return false;\n       }\n     }\n     return true;\n   }\n\n   inBoundaries(x, y) {\n     return ( y >= 0 && y < 20) && x < 20;\n   }\n\n   occupied(x, y){\n     return this.grid[x][y] !== null;\n   }\n}\n\nexport default Board;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/board.js","import Game from './game';\nimport Board from './board';\n\nclass GameView {\n  constructor(game, ctx){\n    this.game = game;\n    this.ctx = ctx;\n    document.body.onkeydown = (e) => this.bindKeyHandlers(e);\n    document.body.onkeyup = (e) => this.bindKeyHandlersUp(e);\n    this.idInterval = null;\n    this.initialSpeed = 700;\n    this.speed = 700;\n    this.gameStarted = false;\n  }\n\n  bindKeyHandlersUp(e) {\n    e.preventDefault();\n    switch (e.key) {\n    case \"ArrowLeft\":\n      document.getElementById(\"left\").style.color = \"black\";\n      break;\n    case \"ArrowRight\":\n      document.getElementById(\"right\").style.color = \"black\";\n      break;\n    case \"ArrowDown\":\n        document.getElementById(\"down\").style.color = \"black\";\n      break;\n    case \"ArrowUp\":\n      document.getElementById(\"up\").style.color = \"black\";\n      break;\n    case \" \":\n      document.getElementById(\"space\").style.color = \"black\";\n      break;\n    }\n  }\n\n  bindKeyHandlers(e){\n    e.preventDefault();\n    switch (e.key) {\n    case \"ArrowLeft\":\n      this.game.moveLeft();\n      document.getElementById(\"left\").style.color = \"#666\";\n      break;\n    case \"ArrowRight\":\n      this.game.moveRight();\n      document.getElementById(\"right\").style.color = \"#666\";\n      break;\n    case \"ArrowDown\":\n      this.game.move();\n      document.getElementById(\"down\").style.color = \"#666\";\n      break;\n    case \"ArrowUp\":\n      this.game.rotate();\n      document.getElementById(\"up\").style.color = \"#666\";\n      break;\n    case \" \":\n      this.game.slam();\n      this.game.move();\n      document.getElementById(\"space\").style.color = \"#666\";\n      break;\n    case \"p\":\n      if(this.gameStarted){\n        this.pause();\n      }\n      break;\n    case \"h\":\n      this.game.handleHold();\n      break;\n    }\n  }\n\n  pause(){\n    alert(\"resume!\");\n  }\n\n  start(){\n    this.gameStarted = true;\n    let startSpeed = this.speed;\n\n    this.idInterval = setInterval(() => {\n      this.game.move();\n      let speed = this.initialSpeed + 100 - (this.game.board.level * 100);\n      if (speed < 100) { speed = 100; }\n      if(startSpeed != speed){\n        clearInterval(this.idInterval);\n        this.speed = speed;\n        startSpeed = speed;\n        this.start();\n      }\n    }, startSpeed);\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  animate(){\n    this.game.draw();\n    if (this.game.over) {\n      this.game.drawEndOfGame(this.ctx);\n      clearInterval(this.idInterval);\n      this.gameStarted = false;\n      document.getElementById(\"start\").disabled = false;\n      return;\n    }\n    requestAnimationFrame(this.animate.bind(this));\n  }\n\n  playSlamSound(){\n    var audio = new Audio('./assets/music.mp3');\n    audio.play()\n  }\n\n}\n\nexport default GameView;\n\n\n\n// WEBPACK FOOTER //\n// ./lib/game_view.js","const oPiece = {\n  color: \"yellow\",\n  coords: [[0, 4],[0, 5],[1, 4],[1, 5]],\n  defaultCoords: [[0, 4],[0, 5],[1, 4],[1, 5]],\n  center: [1, 5],\n  defaultCenter: [1, 5],\n  type: \"staticPiece\",\n  draw: ctx => {\n    ctx.fillStyle = \"yellow\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#666\";\n    ctx.fillRect(30, 30, 20, 20);\n    ctx.strokeRect(30, 30, 20, 20);\n    ctx.fillRect(30, 50, 20, 20);\n    ctx.strokeRect(30, 50, 20, 20);\n    ctx.fillRect(50, 30, 20, 20);\n    ctx.strokeRect(50, 30, 20, 20);\n    ctx.fillRect(50, 50, 20, 20);\n    ctx.strokeRect(50, 50, 20, 20);\n  }\n}\n\nconst sPiece = {\n  color: \"magenta\",\n  coords: [[0, 4],[0, 5],[1, 3],[1, 4]],\n  defaultCoords: [[0, 4],[0, 5],[1, 3],[1, 4]],\n  type: \"togglePiece\",\n  center: [1, 4],\n  defaultCenter: [1, 4],\n  draw: ctx => {\n    ctx.fillStyle = \"magenta\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#666\";\n\n    ctx.fillRect(40, 50, 20, 20);\n    ctx.strokeRect(40, 50, 20, 20);\n\n    ctx.fillRect(40, 30, 20, 20);\n    ctx.strokeRect(40, 30, 20, 20);\n\n    ctx.fillRect(60, 30, 20, 20);\n    ctx.strokeRect(60, 30, 20, 20);\n\n    ctx.fillRect(20, 50, 20, 20);\n    ctx.strokeRect(20, 50, 20, 20);\n  }\n}\n\nconst zPiece = {\n  color: \"green\",\n  coords: [[0, 3],[0, 4],[1, 4],[1, 5]],\n  defaultCoords: [[0, 3],[0, 4],[1, 4],[1, 5]],\n  type: \"togglePiece\",\n  center: [1, 4],\n  defaultCenter: [1, 4],\n  draw: ctx => {\n    ctx.fillStyle = \"green\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#666\";\n\n    ctx.fillRect(40, 50, 20, 20);\n    ctx.strokeRect(40, 50, 20, 20);\n    ctx.fillRect(60, 50, 20, 20);\n    ctx.strokeRect(60, 50, 20, 20);\n    ctx.fillRect(40, 30, 20, 20);\n    ctx.strokeRect(40, 30, 20, 20);\n    ctx.fillRect(20, 30, 20, 20);\n    ctx.strokeRect(20, 30, 20, 20);\n  }\n\n}\n\nconst tPiece = {\n  color: \"black\",\n  coords: [[0, 4],[1, 3],[1, 4],[1, 5]],\n  defaultCoords: [[0, 4],[1, 3],[1, 4],[1, 5]],\n  center: [1, 4],\n  defaultCenter: [1, 4],\n  type: \"rotatePiece\",\n  draw: ctx => {\n    ctx.fillStyle = \"black\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#666\";\n\n    ctx.fillRect(40, 50, 20, 20);\n    ctx.strokeRect(40, 50, 20, 20);\n    ctx.fillRect(20, 50, 20, 20);\n    ctx.strokeRect(20, 50, 20, 20);\n    ctx.fillRect(60, 50, 20, 20);\n    ctx.strokeRect(60, 50, 20, 20);\n    ctx.fillRect(40, 30, 20, 20);\n    ctx.strokeRect(40, 30, 20, 20);\n  }\n}\n\nconst iPiece = {\n  color: \"red\",\n  coords: [[0, 4],[1, 4],[2, 4],[3, 4]],\n  defaultCoords: [[0, 4],[1, 4],[2, 4],[3, 4]],\n  center: [2, 4],\n  defaultCenter: [2, 4],\n  type: \"togglePiece\",\n  draw: ctx => {\n    ctx.fillStyle = \"red\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#666\";\n\n    ctx.fillRect(40, 30, 20, 20);\n    ctx.strokeRect(40, 30, 20, 20);\n    ctx.fillRect(40, 10, 20, 20);\n    ctx.strokeRect(40, 10, 20, 20);\n    ctx.fillRect(40, 50, 20, 20);\n    ctx.strokeRect(40, 50, 20, 20);\n    ctx.fillRect(40, 70, 20, 20);\n    ctx.strokeRect(40, 70, 20, 20);\n  }\n}\n\nconst lPiece = {\n  color: \"orange\",\n  coords: [[0, 4],[1, 4],[2, 4],[2, 5]],\n  defaultCoords: [[0, 4],[1, 4],[2, 4],[2, 5]],\n  center: [1, 4],\n  defaultCenter: [1, 4],\n  type: \"rotatePiece\",\n  draw: ctx => {\n    ctx.fillStyle = \"orange\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#666\";\n\n    ctx.fillRect(30, 20, 20, 20);\n    ctx.strokeRect(30, 20, 20, 20);\n    ctx.fillRect(30, 40, 20, 20);\n    ctx.strokeRect(30, 40, 20, 20);\n    ctx.fillRect(30, 60, 20, 20);\n    ctx.strokeRect(30, 60, 20, 20);\n    ctx.fillRect(50, 60, 20, 20);\n    ctx.strokeRect(50, 60, 20, 20);\n  }\n}\n\nconst jPiece = {\n  color: \"blue\",\n  coords: [[0, 5],[1, 5],[2, 5],[2, 4]],\n  defaultCoords: [[0, 5],[1, 5],[2, 5],[2, 4]],\n  center: [1, 5],\n  defaultCenter: [1, 5],\n  type: \"rotatePiece\",\n  draw: ctx => {\n    ctx.fillStyle = \"blue\";\n    ctx.lineWidth = 1;\n    ctx.strokeStyle = \"#666\";\n\n    ctx.fillRect(50, 20, 20, 20);\n    ctx.strokeRect(50, 20, 20, 20);\n    ctx.fillRect(50, 40, 20, 20);\n    ctx.strokeRect(50, 40, 20, 20);\n    ctx.fillRect(50, 60, 20, 20);\n    ctx.strokeRect(50, 60, 20, 20);\n    ctx.fillRect(30, 60, 20, 20);\n    ctx.strokeRect(30, 60, 20, 20);\n  }\n}\n\nclass Piece {\n  constructor(options){\n    this.coords = options.coords;\n    this.defaultCoords = options.defaultCoords;\n    this.color  = options.color;\n    this.draw   = options.draw;\n    this.center = options.center;\n    this.defaultCenter = options.defaultCenter;\n\n    this.getRotationData = options.getRotationData;\n    this.rotationState = 1;\n  }\n\n  previewHoldTetromino(){\n    const canvas = document.getElementById(\"hold-tetromino\");\n    canvas.height = 100;\n    canvas.width = 100;\n    const ctxHold = canvas.getContext(\"2d\");\n    ctxHold.clearRect(0,0,100,100);\n    this.draw(ctxHold);\n  }\n\n  previewTetromino(ctx) {\n    ctx.clearRect(0, 0, 100, 100);\n    this.draw(ctx);\n  }\n\n  moveLeft() {\n    this.coords = this.coords.map( coord => {\n      let [x, y] = coord;\n      return [x, y - 1];\n    });\n    this.center = [this.center[0], this.center[1] - 1];\n  }\n\n  moveRight() {\n    this.coords = this.coords.map( coord => {\n      let [x, y] = coord;\n      return [x, y + 1];\n    });\n    this.center = [this.center[0], this.center[1] + 1];\n  }\n\n  drop() {\n    this.coords = this.coords.map(coord => {\n      let [x, y] = coord;\n      return [x + 1, y];\n    });\n    this.center = [this.center[0] + 1, this.center[1]];\n  }\n\n  nextRotationCoords() {\n    let nextCoords = [];\n    nextCoords = this.coords.map(coord => {\n      return this.rotateCoord(coord);\n    });\n    return nextCoords;\n  }\n\n  rotate() {\n    this.coords = this.coords.map(coord => {\n      return this.rotateCoord(coord);\n    });\n  }\n\n  rotateCoord(coord) {\n    let [centerX, centerY] = this.center;\n    let posFromCenter = [coord[0] - centerX, coord[1] - centerY];\n    let [row, col] = posFromCenter;\n    return [col + centerX, (row * -1) + centerY];\n  }\n\n  coordsIncluded(coord) {\n    for (let i = 0; i < this.coords.length; i++) {\n      let [oldx, oldy] = this.coords[i];\n      if (oldx === coord[0] && oldy === coord[1]) {\n        return true;\n      }\n    }\n    return false;\n  }\n\n}\n\n\nexport default Piece;\n\n// I, S, Z\nclass TogglePiece extends Piece {\n  constructor(options) {\n    super(options);\n  }\n}\n\n// T, L, J\nclass RotatePiece extends Piece {\n  constructor(options) {\n    super(options);\n  }\n}\n\n// O\nclass StaticPiece extends Piece {\n  constructor(options) {\n    super(options);\n  }\n  rotate(){\n    return;\n  }\n}\n\n\nPiece.PIECES = [oPiece, sPiece, zPiece, tPiece, iPiece, lPiece, jPiece];\n\nPiece.randomPiece = () => {\n  let random = Math.floor(Math.random() * 7);\n  let options = Piece.PIECES[random];\n\n  switch (options.type) {\n    case \"staticPiece\":\n      return new StaticPiece(options);\n    case \"togglePiece\":\n      return new TogglePiece(options);\n    case \"rotatePiece\":\n      return new RotatePiece(options);\n    default:\n      console.log(\"No type\");\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./lib/pieces.js","import Game from './game';\nimport GameView from './game_view';\n\n\ndocument.addEventListener(\"DOMContentLoaded\", function(){\n  const canvas = document.getElementById(\"tetris\");\n  canvas.width = 200;\n  canvas.height = 400;\n  const context = canvas.getContext(\"2d\");\n  // context.scale(2, 2) ;\n\n  const canvasNext = document.getElementById('next-tetromino');\n  canvasNext.width = 100;\n  canvasNext.height = 100;\n  const contextNext = canvasNext.getContext(\"2d\");\n\n  new Game(context).board.drawEnd(context);\n\n  document.getElementById(\"start\").addEventListener(\"click\", (e) => {\n    document.getElementById(\"start\").disabled = true;\n    const game = new Game(context, contextNext);\n    new GameView(game, context).start();\n  });\n\n  document.getElementById(\"sound\").addEventListener(\"click\", (e) => {\n    var audio = document.getElementById('tetris-audio');\n    if (audio.paused) {\n        audio.play();\n        document.getElementById('full-sound').style.color = \"#333\";\n        document.getElementById('no-sound').style.color = \"#999\";\n    }else{\n        audio.pause();\n        document.getElementById('full-sound').style.color = \"#999\";\n        document.getElementById('no-sound').style.color = \"#333\";\n        // audio.currentTime = 0\n    }\n  });\n\n});\n\n\n\n// WEBPACK FOOTER //\n// ./lib/tetris.js"],"sourceRoot":""}